<svg xmlns="http://www.w3.org/2000/svg" width="529pt" height="920" viewBox="0 0 528.53 689.63"><g class="graph" transform="translate(4 685.63)"><path fill="#fff" d="M-4 4v-689.63h528.53V4H-4z"/><text text-anchor="middle" x="260.26" y="-663.23" font-family="Times,serif" font-size="16">网状叙事系统核心流程</text><g class="cluster"><path fill="#add8e6" stroke="#add8e6" d="M8-8v-638.43h190V-8H8z"/><text text-anchor="middle" x="103" y="-628.03" font-family="Times,serif" font-size="16">事件记录阶段</text></g><g class="cluster"><path fill="#90ee90" stroke="#90ee90" d="M206-10.8v-635.63h288V-10.8H206z"/><text text-anchor="middle" x="350" y="-628.03" font-family="Times,serif" font-size="16">事件触发阶段</text></g><g class="node"><ellipse fill="#fff" stroke="#000" cx="103" cy="-581.82" rx="87.2" ry="29.42"/><text text-anchor="middle" x="103" y="-586.02" font-family="Times,serif" font-size="14">游戏内事件发生</text><text text-anchor="middle" x="103" y="-569.22" font-family="Times,serif" font-size="14">(对话, 互动, 机制变化)</text></g><g class="node"><path fill="#fff" stroke="#000" d="M125.25-482h-44.5c-6 0-12 6-12 12v12c0 6 6 12 12 12h44.5c6 0 12-6 12-12v-12c0-6-6-12-12-12"/><text text-anchor="middle" x="103" y="-459.8" font-family="Times,serif" font-size="14">事件监听器</text></g><g class="edge"><path fill="none" stroke="#000" d="M103-552.19v58.59"/><path stroke="#000" d="m106.5-493.69-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="109.75" y="-526.3" font-family="Times,serif" font-size="9">捕获</text></g><g class="node"><path fill="gold" stroke="#000" d="M145.28-375.6H60.72c-6 0-12 6-12 12v12c0 6 6 12 12 12h84.56c6 0 12-6 12-12v-12c0-6-6-12-12-12"/><text text-anchor="middle" x="103" y="-353.4" font-family="Times,serif" font-size="14">LLM分析事件结果</text></g><g class="edge"><path fill="none" stroke="#000" d="M103-445.76v58.45"/><path stroke="#000" d="m106.5-387.38-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="123.25" y="-396.3" font-family="Times,serif" font-size="9">上报事件数据</text></g><g class="node"><path fill="#ff0" stroke="#000" d="m137.25-284.4-3-4h-21l-3 4h-41.5v41.6h68.5v-41.6z"/><text text-anchor="middle" x="103" y="-267.8" font-family="Times,serif" font-size="14">生成标签组</text><text text-anchor="middle" x="103" y="-251" font-family="Times,serif" font-size="14">(遵循原则)</text></g><g class="edge"><path fill="none" stroke="#000" d="M103-339.3v43.1"/><path stroke="#000" d="m106.5-296.22-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="119.88" y="-313.5" font-family="Times,serif" font-size="9">拆分与标注</text></g><g class="node"><path fill="#e0ffff" stroke="#000" d="M135.75-164h-65.5c-6 0-12 6-12 12v12c0 6 6 12 12 12h65.5c6 0 12-6 12-12v-12c0-6-6-12-12-12"/><text text-anchor="middle" x="103" y="-141.8" font-family="Times,serif" font-size="14">标签词嵌入处理</text></g><g class="edge"><path fill="none" stroke="#000" d="M103-242.46v66.87"/><path stroke="#000" d="m106.5-175.78-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="113.12" y="-208.3" font-family="Times,serif" font-size="9">向量化</text></g><g class="node"><path fill="#d3d3d3" stroke="#000" d="M130.5-57.6h-55c-6 0-12 6-12 12V-28c0 6 6 12 12 12h55c6 0 12-6 12-12v-17.6c0-6-6-12-12-12"/><text text-anchor="middle" x="103" y="-41" font-family="Times,serif" font-size="14">事件记录存储</text><text text-anchor="middle" x="103" y="-24.2" font-family="Times,serif" font-size="14">(含嵌入向量)</text></g><g class="edge"><path fill="none" stroke="#000" d="M103-127.78v58.4"/><path stroke="#000" d="m106.5-69.42-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="116.5" y="-78.3" font-family="Times,serif" font-size="9">存入记录</text></g><g class="node"><path fill="gold" stroke="#000" d="M346.19-292.8h-94.38c-6 0-12 6-12 12v34.4c0 6 6 12 12 12h94.38c6 0 12-6 12-12v-34.4c0-6-6-12-12-12"/><text text-anchor="middle" x="299" y="-276.2" font-family="Times,serif" font-size="14">在事件记录中</text><text text-anchor="middle" x="299" y="-259.4" font-family="Times,serif" font-size="14">匹配标签组</text><text text-anchor="middle" x="299" y="-242.6" font-family="Times,serif" font-size="14">(词嵌相似度 &gt; 65%)</text></g><g class="edge"><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M142.83-46.68c18-3.78 39.58-7.98 59.17-10.92 29.58-4.43 235.69-1.17 269-46.8 21.8-29.87 20.26-52.27 0-83.2-22.58-34.48-64.85-53.2-101.83-63.31"/><path stroke="#000" d="m368.69-247.42-8.83-5.87 10.56-.91-1.73 6.78z"/><text text-anchor="middle" x="503.65" y="-143.3" font-family="Times,serif" font-size="9">查询记录库</text></g><g class="node"><ellipse fill="#fff" stroke="#000" cx="350" cy="-581.82" rx="89.68" ry="29.42"/><text text-anchor="middle" x="350" y="-586.02" font-family="Times,serif" font-size="14">系统检测触发条件</text><text text-anchor="middle" x="350" y="-569.22" font-family="Times,serif" font-size="14">(如进入区域, 完成任务)</text></g><g class="node"><path fill="#fff" stroke="#000" d="M474.04-505.6H281.63c-6 0-15.34 4.99-18.67 9.97l-42.33 63.26c-3.34 4.98-.67 9.97 5.33 9.97h192.41c6 0 15.34-4.99 18.67-9.97l42.33-63.26c3.34-4.98.67-9.97-5.33-9.97"/><text text-anchor="middle" x="350" y="-468.2" font-family="Times,serif" font-size="14">待触发事件的</text><text text-anchor="middle" x="350" y="-451.4" font-family="Times,serif" font-size="14">前置条件 (标签组+逻辑)</text></g><g class="edge"><path fill="none" stroke="#000" d="M350-552.19v34.88"/><path stroke="#000" d="m353.5-517.49-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="373.62" y="-526.3" font-family="Times,serif" font-size="9">获取待验证事件</text></g><g class="node"><path fill="#e0ffff" stroke="#000" d="M343-375.6h-76c-6 0-12 6-12 12v12c0 6 6 12 12 12h76c6 0 12-6 12-12v-12c0-6-6-12-12-12"/><text text-anchor="middle" x="305" y="-353.4" font-family="Times,serif" font-size="14">前置条件标签嵌入</text></g><g class="edge"><path fill="none" stroke="#000" d="M332.34-422.04c-5.17 12-10.7 24.83-15.42 35.78"/><path stroke="#000" d="m320.28-385.21-7.17 7.8.74-10.57 6.43 2.77z"/><text text-anchor="middle" x="343.72" y="-396.3" font-family="Times,serif" font-size="9">处理条件标签</text></g><g class="node"><path fill="gold" stroke="#000" d="m338.76-183.41-89.17 33.22c-5.62 2.1-5.62 6.28 0 8.38l89.17 33.22c5.62 2.1 16.86 2.1 22.48 0l89.17-33.22c5.62-2.1 5.62-6.28 0-8.38l-89.17-33.22c-5.62-2.1-16.86-2.1-22.48 0"/><text text-anchor="middle" x="350" y="-150.2" font-family="Times,serif" font-size="14">布尔逻辑判断</text><text text-anchor="middle" x="350" y="-133.4" font-family="Times,serif" font-size="14">(AND/OR/NOT)</text></g><g class="edge"><path fill="none" stroke="#000" d="M364.26-422.06c1.54 5.87 2.87 11.87 3.74 17.66.71 4.75.01 6 0 10.8-.22 83.56 10.98 105.31-1 188-.52 3.62-1.22 7.32-2.02 11.03"/><path stroke="#000" d="m368.42-193.9-5.78 8.89-1.02-10.55 6.8 1.66z"/><text text-anchor="middle" x="391.48" y="-313.5" font-family="Times,serif" font-size="9">应用逻辑规则</text></g><g class="edge"><path fill="none" stroke="#000" d="M303.87-339.3c-.64 9.87-1.48 22.66-2.27 34.86"/><path stroke="#000" d="m305.1-304.3-4.15 9.75-2.84-10.21 6.99.46z"/><text text-anchor="middle" x="316.21" y="-313.5" font-family="Times,serif" font-size="9">查询条件</text></g><g class="edge"><path fill="none" stroke="#000" d="M311.61-234.02c5.5 12.46 12.08 27.39 18.24 41.34"/><path stroke="#000" d="m332.99-194.22.84 10.57-7.24-7.74 6.4-2.83z"/><text text-anchor="middle" x="343.22" y="-208.3" font-family="Times,serif" font-size="9">返回匹配结果</text></g><g class="node"><path fill="salmon" stroke="#000" d="m350-54.8-71.37 18 71.37 18 71.37-18-71.37-18z"/><path fill="none" stroke="#000" d="M290.27-39.73v5.86M338.36-21.73h23.28M409.73-33.87v-5.86M361.64-51.87h-23.28"/><text text-anchor="middle" x="350" y="-32.6" font-family="Times,serif" font-size="14">触发新事件!</text></g><g class="edge"><path fill="none" stroke="#000" d="M350-104.17v37.68"/><path stroke="#000" d="m353.5-66.8-3.5 10-3.5-10h7z"/><text text-anchor="middle" x="363.5" y="-78.3" font-family="Times,serif" font-size="9">条件满足</text></g></g></svg>